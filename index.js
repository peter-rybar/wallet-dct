!function(){"use strict";function t(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function e(t,n,o){if(t){for(var i=t[0],r=t[1],s=r&&r.constructor===Object,a=s?2:1,c=0,u=a;u<t.length;u++)t[u]&&t[u].constructor!==Function&&c++;var l,h=i.split("~"),p=h[1],d=h[0].split("."),f=d[0].split("#"),y=f[0]||"div",b=f[1],g=d.slice(1);l=s?r:{},b&&(l._id=b),g.length&&(l._classes=g),p&&(l._ref=p);if(!n.open(y,l,c,o))for(var u=a,m=t.length;u<m;u++){var _=t[u];if(void 0!==_)switch(_.constructor){case Array:e(_,n,o);break;case Function:n.fnc(_,o);break;case String:n.text(_,o);break;default:n.obj(_,o)}}n.close(y,c,o)}}function n(t,n){e(t,new r,n)}function o(t,e){for(var o=0,i=t;o<i.length;o++){var r=i[o];if(r.constructor===String)IncrementalDOM.text(r);else if("toJsonML"in r){var s=r;n(s.toJsonML(),s)}else n(r,e)}}function i(t,e,n){IncrementalDOM.patch(t,function(t){return o(t,n)},e)}var r=function(){function t(){}return t.prototype.open=function(t,e,n,o){var i=[],r=e._id,s=e._classes?e._classes:[],a=e._ref,c=e._widget;for(var u in e)if(e.hasOwnProperty(u))switch(u){case"_id":case"_classes":case"_ref":case"_key":case"_skip":case"_widget":break;case"id":r=e[u];break;case"classes":s=s.concat(e[u]);break;case"class":s=s.concat(e[u].split(" "));break;case"data":for(var l in e[u])e[u].hasOwnProperty(l)&&(e[u][l].constructor===String?i.push("data-"+l,e[u][l]):i.push("data-"+l,JSON.stringify(e[u][l])));break;case"styles":i.push("style",e[u]);break;default:"function"==typeof e[u]?i.push("on"+u,e[u]):i.push(u,e[u])}return s.length&&i.unshift("class",s.join(" ")),r&&i.unshift("id",r),IncrementalDOM.elementOpen.apply(IncrementalDOM,[t,e._key||null,null].concat(i)),e._skip&&IncrementalDOM.skip(),o&&a&&(o.refs[a]=IncrementalDOM.currentElement()),c&&"mount"in c&&c.mount.constructor===Function&&(c.mount(IncrementalDOM.currentElement()),IncrementalDOM.skip()),!!e._skip},t.prototype.close=function(t,e,n){IncrementalDOM.elementClose(t)},t.prototype.text=function(t,e){IncrementalDOM.text(t)},t.prototype.fnc=function(t,e){t(IncrementalDOM.currentElement())},t.prototype.obj=function(t,n){"toJsonML"in t?e(t.toJsonML(),this,t):this.text(""+t,n)},t}(),s=function(){function t(e){void 0===e&&(e=""),this.type="Widget",this.id=this.type+"-"+t.__count++,this.refs={},e&&(this.type=e)}return t.prototype.mount=function(t){if(void 0===t&&(t=document.body),"widget"in t){var e=t.widget;e&&e.umount()}if(!this.dom){this.dom=t,t.widget=this;i(t,this.render(),this),t.setAttribute("widget",this.type),this.onMount&&this.onMount()}return this},t.prototype.umount=function(){if(this.dom){this.onUmount&&this.onUmount(),this.dom.hasAttribute("widget")&&this.dom.removeAttribute("widget");for(var t=this.dom.querySelectorAll("[widget]"),e=0;e<t.length;e++){var n=t[e].widget;n&&n.umount()}for(;this.dom.firstChild;)this.dom.removeChild(this.dom.firstChild);this.dom.widget=void 0,this.dom=void 0}return this},t.prototype.update=function(){var t=this;return this.dom&&!this._updateSched&&(this._updateSched=setTimeout(function(){t.dom&&i(t.dom,t.render(),t),t._updateSched=null},0)),this},t.prototype.toJsonML=function(){var t=this;if(this.dom){if(!this._updateSched)return["div",{_skip:!0,_id:this.id,_key:this.id,widget:this.type}];clearTimeout(this._updateSched),this._updateSched=void 0}var e=this.render();return["div",{_id:this.id,_key:this.id,widget:this.type}].concat(e,[function(e){t.dom||(t.dom=e,e.widget=t,t.onMount&&t.onMount())}])},t.__count=0,t}();IncrementalDOM.notifications.nodesDeleted=function(t){t.forEach(function(t){if(1===t.nodeType&&"widget"in t){var e=t.widget;e&&e.umount()}})};var a=function(e){function n(){var t=e.call(this,"AppShell")||this;return t.onClickMenu=function(){t.sidebarToggle()},t.onClickOwerlay=function(){t.sidebarClose()},t}return t(n,e),n.prototype.getTitle=function(){return this._title},n.prototype.setTitle=function(t){return this._title=t,this.dom&&(this.refs.title.textContent=t),this},n.prototype.getTitle1=function(){return this._title1},n.prototype.setTitle1=function(t){return this._title1=t,this.dom&&(this.refs.title1.textContent=t?" - "+t:""),this},n.prototype.getSidebar=function(){return this._sidebar},n.prototype.setSidebar=function(t){return this._sidebar=t,t&&this.refs.sidebar&&t.mount(this.refs.sidebar),this},n.prototype.getContent=function(){return this._content},n.prototype.setContent=function(t){return this._content=t,t&&this.refs.content&&t.mount(this.refs.content),this},n.prototype.onMount=function(){console.log("onMount",this.type,this.id)},n.prototype.onUmount=function(){console.log("onUmount",this.type,this.id)},n.prototype.render=function(){return[["div.w3-bar.w3-top.w3-large.w3-blue",{style:"z-index:4"},["button.w3-bar-item.w3-button.w3-hide-large.w3-hover-none.w3-hover-text-light-grey",{accesskey:"m",click:this.onClickMenu},["i.fa.fa-bars"]],["span.w3-bar-item",["strong~title",["a",{href:"#",style:"text-decoration: none;"},this._title]],["span~title1",this._title1?" - "+this._title1:""]],["span.w3-bar-item.w3-right",["a",{href:"https://github.com/peter-rybar/wallet-dct",title:"Github",target:"_blank"},["i.fa.fa-github"]]],["span.w3-bar-item.w3-right",{style:"padding-right: 4px; padding-left: 4px;"},["a",{href:"http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fpeter-rybar.github.io%2Fwallet-dct%2F&title=Wallet%20DCT&source=https%3A%2F%2Fpeter-rybar.github.io%2Fwallet-dct%2F",title:"Share on LinkedIn",target:"_blank"},["i.fa.fa-linkedin"]]],["span.w3-bar-item.w3-right",{style:"padding-right: 4px; padding-left: 4px;"},["a",{href:"https://plus.google.com/share?url=https%3A%2F%2Fpeter-rybar.github.io%2Fwallet-dct%2F",title:"Share on Google+",target:"_blank"},["i.fa.fa-google-plus"]]],["span.w3-bar-item.w3-right",{style:"padding-right: 4px; padding-left: 4px;"},["a",{href:"https://twitter.com/intent/tweet?source=https%3A%2F%2Fpeter-rybar.github.io%2Fwallet-dct%2F&text=Wallet%20DCT:%20https%3A%2F%2Fpeter-rybar.github.io%2Fwallet-dct%2F",title:"Tweet",target:"_blank"},["i.fa.fa-twitter"]]],["span.w3-bar-item.w3-right",{style:"padding-right: 4px; padding-left: 4px;"},["a",{href:"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fpeter-rybar.github.io%2Fwallet-dct%2F&quote=Wallet%20DCT",title:"Share on Facebook",target:"_blank"},["i.fa.fa-facebook"]]]],["div.w3-sidebar.w3-collapse.w3-white.w3-animate-left~sidebar",{_widget:this._sidebar,style:"z-index:3;width:300px;"}],["div.w3-overlay.w3-hide-large.w3-animate-opacity~overlay",{style:"cursor:pointer",title:"close side menu",click:this.onClickOwerlay}],["div.w3-main",{style:"margin-left:300px;margin-top:43px;"},["div.w3-container~content",{_widget:this._content}]],["div#snackbar~snackbar","test"]]},n.prototype.snackbar=function(t){var e=this.refs.snackbar;e.textContent=t,e.classList.add("show"),setTimeout(function(){return e.classList.remove("show")},3e3)},n.prototype.sidebarOpen=function(){this.refs.sidebar.style.display="block",this.refs.overlay.style.display="block"},n.prototype.sidebarClose=function(){this.refs.sidebar.style.display="none",this.refs.overlay.style.display="none"},n.prototype.sidebarToggle=function(){var t=this.refs.sidebar,e=this.refs.overlay;"block"===t.style.display?(t.style.display="none",e.style.display="none"):(t.style.display="block",e.style.display="block")},n}(s),c=function(e){function n(){var t=e.call(this,"SidebarWidget")||this;return t._hash="",t._account=[{hash:"history",label:"History",icon:"i.fa.fa-history.fa-fw"},{hash:"transfer",label:"Transfer",icon:"i.fa.fa-exchange.fa-fw"}],t._settings=[{hash:"settings-acc",label:"Account",icon:"i.fa.fa-cog.fa-fw"},{hash:"settings-bc",label:"Blockchain",icon:"i.fa.fa-cogs.fa-fw"}],t._nbsp="  ",t}return t(n,e),n.prototype.setUser=function(t){return this._user=t,this.update(),this},n.prototype.setHash=function(t){return this._hash=t,this.update(),this},n.prototype.onMount=function(){console.log("onMount",this.type,this.id)},n.prototype.onUmount=function(){console.log("onUmount",this.type,this.id)},n.prototype.render=function(){var t=this;return[["nav",["div.w3-container",["h5","Account"]],["div.w3-bar-block"].concat(this._account.map(function(e){return["a.w3-bar-item.w3-button.w3-padding",{href:"#"+e.hash,classes:e.hash===t._hash?["w3-blue"]:[]},[e.icon],t._nbsp,e.label]})),["hr"],["div.w3-container",["h5","Settings"]],["div.w3-bar-block"].concat(this._settings.map(function(e){return["a.w3-bar-item.w3-button.w3-padding",{href:"#"+e.hash,classes:e.hash===t._hash?["w3-blue"]:[]},[e.icon],t._nbsp,e.label]})),["br"],["br"]]]},n}(s),u=function(e){function n(){return e.call(this,"MainWidget")||this}return t(n,e),n.prototype.onMount=function(){console.log("onMount",this.type,this.id)},n.prototype.onUmount=function(){console.log("onUmount",this.type,this.id)},n.prototype.render=function(){return[["h2","Wallet DCT"],["p","Web/Mobile Wallet application (PWA)"],["ul",["li",["a",{href:"https://decent.ch/",target:"_blank"},"DECENT web page"]],["li",["a",{href:"https://dcore.decent.ch/",target:"_blank"},"DCore product page"]],["li",["a",{href:"https://en.wikipedia.org/wiki/DECENT_Network",target:"_blank"},"Wiki - DECENT_Network"]]]]},n}(s),l=function(){function t(){this._slots=[],this._emit=!0}return t.prototype.onConnect=function(t){this._onConnect=t},t.prototype.onDisconnect=function(t){this._onDisconnect=t},t.prototype.connNo=function(){return this._slots.length},t.prototype.connect=function(t,e){"function"==typeof t&&(e?this._slots.push({callback:t,object:e}):this._slots.push({callback:t}),this._onConnect&&this._onConnect(this._slots.length))},t.prototype.disconnect=function(t,e){"function"==typeof t&&(this._slots=this._slots.filter(function(n){return void 0===e?n.callback!==t:n.callback!==t&&n.object!==e}),this._onDisconnect&&this._onDisconnect(this._slots.length))},t.prototype.disconnectAll=function(){this._slots=[],this._onDisconnect&&this._onDisconnect(this._slots.length)},t.prototype.freeze=function(){this._emit=!1},t.prototype.unfreeze=function(){this._emit=!0},t.prototype.emit=function(t){return this._emit&&this._slots.length?this._slots.map(function(e){var n=e.object;return n?e.callback.call(n,t):e.callback(t)}):[]},t}(),h=function(e){function n(){var t=e.call(this,"HistoryWidget")||this;return t._title="Form",t.sigData=new l,t}return t(n,e),n.prototype.getTitle=function(){return this._title},n.prototype.setTitle=function(t){return this._title=t,this.update(),this},n.prototype.onMount=function(){console.log("onMount",this.type,this.id)},n.prototype.onUmount=function(){console.log("onUmount",this.type,this.id)},n.prototype.render=function(){return[["h2",this._title],["p",["input.w3-input.w3-border.w3-padding",{type:"text",placeholder:"Search..."}]],["ul.w3-ul.w3-white.w3-hoverable",["li.w3-bar",["span.w3-bar-item.w3-large.w3-right","2.53 DCT",["br"],["span.w3-small","0.05 DCT"]],["div.w3-bar-item",["span.w3-large","Mike"],["br"],["span","Web Designer"]]],["li.w3-bar",["span.w3-bar-item.w3-large.w3-right","2.53 DCT",["br"],["span.w3-small","0.05 DCT"]],["div.w3-bar-item",["span.w3-large","Mike"],["br"],["span","Web Designer"]]]],["br"],["div.w3-bar.w3-center",["a.w3-button.w3-xlarge",{href:"#"},"«"],["a.w3-button",{href:"#"},"1"],["a.w3-button.w3-border.w3-border-blue",{href:"#"},"2"],["a.w3-button",{href:"#"},"3"],["a.w3-button",{href:"#"},"4"],["a.w3-button.w3-xlarge",{href:"#"},"»"]],["br"],["br"]]},n}(s),p=function(e){function n(){var t=e.call(this,"TransferWidget")||this;return t._title="Transfer",t._data={recipient:void 0,amount:void 0,memo:void 0},t._errors={amount:"",recipient:"",memo:""},t._onFormSubmit=function(e){e.preventDefault(),console.log("submit",t._data),t._validateRecipient(t.refs.recipient.value),t._validateAmount(t.refs.amount.value),t._validateMemo(t.refs.memo.value),t._errors.amount||t._errors.recipient||t._errors.memo?t.update():t._onSubmit&&t._onSubmit(t._data)},t._onInputAmount=function(e){var n=e.target;console.log("Amount",n.value),t._validateAmount(n.value),t.update()},t._onInputMemo=function(e){var n=e.target;console.log("Memo",n.value),t._validateMemo(n.value),t.update()},t._onInputRecipient=function(e){var n=e.target;console.log("Recipient",n.value),t._validateRecipient(n.value),t.update()},t}return t(n,e),n.prototype.getTitle=function(){return this._title},n.prototype.setTitle=function(t){return this._title=t,this.update(),this},n.prototype.getData=function(){return this._data},n.prototype.setData=function(t){return this._data=t,this.update(),this},n.prototype.onMount=function(){console.log("onMount",this.type,this.id)},n.prototype.onUmount=function(){console.log("onUmount",this.type,this.id)},n.prototype.render=function(){return[["h2",this._title],["form.w3-container",{submit:this._onFormSubmit},["p",["label","Recipient ",["input.w3-input~recipient",{type:"text",input:this._onInputRecipient}]]," ",["span.w3-text-red",this._errors.recipient]],["p",["label","Amount ",["input.w3-input~amount",{type:"number",min:"0",max:"1000000",input:this._onInputAmount}]]," ",["span.w3-text-red",this._errors.amount]],["p",["label","Memo ",["input.w3-input~memo",{type:"text",input:this._onInputMemo}]]," ",["span.w3-text-red",this._errors.memo]],["p",["button.w3-btn.w3-blue~submit","Submit"]]]]},n.prototype._validateRecipient=function(t){t?(this._data.recipient=t,this._errors.recipient=""):(this._data.recipient=void 0,this._errors.recipient="Recipient required")},n.prototype._validateMemo=function(t){t?(this._data.memo=t,this._errors.memo=""):(this._data.memo=void 0,this._errors.memo="Memo required")},n.prototype._validateAmount=function(t){t?isNaN(+t)?(this._data.amount=void 0,this._errors.amount="Invalid amount number"):(this._data.amount=+t,this._errors.amount=""):(this._data.amount=void 0,this._errors.amount="Amount required")},n}(s),d=function(e){function n(){var t=e.call(this,"AccSettingsWidget")||this;return t._onSubmit=function(e){e.preventDefault(),t._account.name=t.refs.accName.value,t._account.privKey=t.refs.accPrivKey.value,console.log("save",t._account),t._onSave&&t._onSave(t._account)},t._account={name:"",privKey:""},t}return t(n,e),n.prototype.getTitle=function(){return this._title},n.prototype.setTitle=function(t){return this._title=t,this.update(),this},n.prototype.getAccount=function(){return this._account},n.prototype.setAccount=function(t){return this._account=t,this.update(),this},n.prototype.onSave=function(t){return this._onSave=t,this},n.prototype.onMount=function(){console.log("onMount",this.type,this.id)},n.prototype.onUmount=function(){console.log("onUmount",this.type,this.id)},n.prototype.render=function(){return[["h2",this._title],["form.w3-container",{submit:this._onSubmit},["p",["label","Name ",["input.w3-input~accName",{type:"text",value:this._account.name}]]," "],["p",["label","Private key ",["input.w3-input~accPrivKey",{type:"text",value:this._account.privKey}]]," "],["p",["button.w3-btn.w3-blue","Save"]]]]},n}(s),f=function(e){function n(){var t=e.call(this,"BcSettingsWidget")||this;return t._onSubmit=function(e){e.preventDefault(),t._settings.chainId=t.refs.bcId.value,t._settings.chainAddr=t.refs.bcAddr.value,console.log("save",t._settings),t._onSave&&t._onSave(t._settings)},t._settings={chainId:"",chainAddr:""},t}return t(n,e),n.prototype.getTitle=function(){return this._title},n.prototype.setTitle=function(t){return this._title=t,this.update(),this},n.prototype.getSettings=function(){return this._settings},n.prototype.setSettings=function(t){return this._settings=t,this.update(),this},n.prototype.onSave=function(t){return this._onSave=t,this},n.prototype.onMount=function(){console.log("onMount",this.type,this.id)},n.prototype.onUmount=function(){console.log("onUmount",this.type,this.id)},n.prototype.render=function(){return[["h2",this._title],["form.w3-container",{submit:this._onSubmit},["p",["label","Blockchain Id ",["input.w3-input~bcId",{type:"text",value:this._settings.chainId}]]," "],["p",["label","Blockchain Address ",["input.w3-input~bcAddr",{type:"text",value:this._settings.chainAddr}]]," "],["p",["button.w3-btn.w3-blue","Save"]]]]},n}(s),y=window["dcorejs-lib"],b=window.dcorejs,g=function(){function t(){}return t.prototype.init=function(t,e,n){return b.initialize({chainId:t,dcoreNetworkWSPaths:e},y,n),this},t.prototype.chainProperty=function(){return b.explorer().getChainProperty(0)},t.prototype.accountByName=function(t){return b.account().getAccountByName(t)},t.prototype.accountById=function(t){return b.account().getAccountById(t)},t.prototype.balanceByName=function(t){var e=this;return new Promise(function(n,o){e.accountByName(t).then(function(t){e.balanceById(t.id).then(function(t){return n(t)}).catch(function(t){return o(t)})}).catch(function(t){return o(t)})})},t.prototype.balanceById=function(t){return b.account().getBalance(t)},t.prototype.accountHistory=function(t){return b.account().getAccountHistory(t)},t.prototype.transactionHistory=function(t,e){return b.account().getTransactionHistory(t,e)},t}(),m=function(){function t(){this._encoder=function(t){return JSON.stringify(t)},this._decoder=function(t){return""===t?JSON.parse(t):void 0}}return t.prototype.onChange=function(t){var e=this;if("onhashchange"in window)onhashchange=function(){t(e.read())};else{var n=location.hash;this._listenIntervalId&&clearInterval(this._listenIntervalId),this._listenIntervalId=setInterval(function(){location.hash!==n&&(n=location.hash,t(e.read()))},500)}return this},t.prototype.setEncoder=function(t){return this._encoder=t,this},t.prototype.setDecoder=function(t){return this._decoder=t,this},t.prototype.read=function(){var t=location.hash.slice(1);return this._decoder(t)},t.prototype.write=function(t){var e=this._encoder(t);location.hash="#"+e},t}();!function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then(function(t){t.installing?console.log("Service worker installing"):t.waiting?console.log("Service worker installed"):t.active&&console.log("Service worker active"),console.log("Registration succeeded. Scope is "+t.scope)}).catch(function(t){console.error("Registration failed with "+t)})}();var _=(new c).setUser({name:"Peter",avatar:""}),w=(new a).setTitle("Wallet DCT").setSidebar(_).mount(document.getElementById("app"));if(!store.get("blockchain")){var v={chainId:"17401602b201b3c45a3ad98afc6fb458f91f519bd30d1058adf6f2bed66376bc",chainAddr:"wss://stage.decentgo.com:8090"};store.set("blockchain",v)}var k=store.get("blockchain");if(!store.get("account")){var S={name:"",privKey:""};store.set("account",S)}var M=store.get("account"),I=new u,D=(new h).setTitle("History"),A=(new p).setTitle("Transfer"),T=(new f).setTitle("Blockchain").setSettings(k).onSave(function(t){return store.set("blockchain",t)}),x=(new d).setTitle("Account").setAccount(M).onSave(function(t){return store.set("account",t)}),C={history:D,transfer:A,"settings-bc":T,"settings-acc":x},F=function(t){w.sidebarClose(),_.setHash(t);var e=C[t];e?w.setContent(e):t?O.write(""):w.setContent(I)},O=(new m).setEncoder(function(t){return t}).setDecoder(function(t){return t}).onChange(F);F(O.read()),store.get("account")||O.write("settings-acc");(new g).init(k.chainId,[k.chainAddr],function(t){switch(console.log("dcorejs state:",t),t){case"open":w.snackbar("Blockchain connected");break;default:w.snackbar("State: "+t)}});self.app=w,self.VERSION="0.1.0"}();
//# sourceMappingURL=index.js.map
